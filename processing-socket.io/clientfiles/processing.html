<html>
<head>
  <script src="js/processing.js"></script>
  <script src="/socket.io/socket.io.js"></script> 
</head>
<body><h1>Processing.js</h1>

<p><canvas id="canvas1" width="800" height="400"></canvas></p>

<script id="script1" type="text/javascript">

// Simple way to attach js code to the canvas is by using a function
function sketchProc(processing) {
    var x;
    var y;
    var col;

    //get data from socket.io
    var socket = io.connect();
    socket.on('bang', function (data) {
        console.log(data.x+"/"+data.y);
        x = data.x;
        y = data.y;
    });

    processing.setup = function() {
      // erase background
      processing.size(800, 400);
      processing.background(0);
      col = processing.color(64, 64, 0, 64);
    }

    // Override draw function, by default it will be called 60 times per second
    processing.draw = function() {
      // determine center and max clock arm length
      //var centerX = processing.width / 2, centerY = processing.height / 2;

      processing.fill(col);
      processing.noStroke();

      processing.rect(x*processing.width , y*processing.height, 20, 20);
    }; 
}

var canvas = document.getElementById("canvas1");
// attaching the sketchProc function to the canvas
var p = new Processing(canvas, sketchProc);
// p.exit(); to detach it
</script>
</body>
</html>
